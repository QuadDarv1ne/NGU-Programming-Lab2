def calculate_piecewise_function():
    """
    Вычисляет значения кусочно-заданной функции на интервале [x_start, x_end] с шагом dx 
    и выводит результат в виде таблицы. Функция определена графически и имеет различные 
    ветви:
    - Линейные участки с углом 45° (коэффициент 1).
    - Постоянные значения на отдельных интервалах.
    - Области, где функция не определена.

    Параметры интервала:
    - x_start = -4.0: начало интервала.
    - x_end = 8.0: конец интервала.
    - dx = 0.5: шаг вычислений.

    Формат вывода:
    - Таблица с колонками 'x' и 'y'.
    - Значения 'y' округляются до одного десятичного знака.
    - Для неопределенных значений выводится 'не определено'.

    Особенности:
    - Интервал выбран так, чтобы проверить все ветви функции.
    - Учтены граничные условия и погрешности округления.
    """
    x_start = -4.0
    x_end = 8.0
    dx = 0.5
    x = x_start

    print("x\t|\ty")
    print("----------------")

    while x <= x_end + 1e-6:  # Учет погрешности для чисел с плавающей точкой
        if x < -3.0:
            y = "не определено"
        elif -3.0 <= x < -1.0:
            y = round(x + 3, 1)
        elif -1.0 <= x < 0.0:
            y = 2
        elif 0.0 <= x < 1.0:
            y = round(x + 2, 1)
        elif 1.0 <= x < 3.0:
            y = round(x + 2, 1)
        elif 3.0 <= x < 5.0:
            y = 5
        elif 5.0 <= x <= 7.0:
            y = round(x, 1)
        else:
            y = "не определено"

        # Форматирование вывода
        if isinstance(y, str):
            print(f"{x:.1f}\t|\t{y}")
        else:
            print(f"{x:.1f}\t|\t{y:.1f}")

        x = round(x + dx, 1)  # Корректное увеличение x

# Пример вызова функции
calculate_piecewise_function()
