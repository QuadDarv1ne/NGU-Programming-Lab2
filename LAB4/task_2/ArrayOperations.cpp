/**
 * @file
 * @brief –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å –º–∞—Å—Å–∏–≤–∞–º–∏:
 * 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–∞ –∏–∑ n —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª (n >= 10) –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [-100, 100].
 * 2. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–∏—Ö –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
 *    –û–±–º–µ–Ω –º–µ—Å—Ç–∞–º–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
 * 3. –ü–æ–∏—Å–∫ —Å–∞–º–æ–π –¥–ª–∏–Ω–Ω–æ–π —É–±—ã–≤–∞—é—â–µ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
 * 4. –í—ã–≤–æ–¥ –º–∞—Å—Å–∏–≤–∞ N√ó5, –Ω–∞—á–∏–Ω–∞—è —Å 1000.
 */

/**
 * –§–æ—Ä–º–∞—Ç —Å–ª–µ–¥—É–µ—Ç –æ–±—â–µ–ø—Ä–∏–Ω—è—Ç—ã–º —à–∞–±–ª–æ–Ω–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, Doxygen –∏–ª–∏ Google Style), —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ:
 * –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ª–µ–≥–∫–æ –ø–æ–π–º—É—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–∂–µ –≤ —á—É–∂–æ–º –∫–æ–¥–µ.
 * –ü–∞—Ä—Å–∏—Ä—É–µ–º—ã–º ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–∫–∞–∫ Doxygen) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç —Ç–µ–≥–∏ @param –∏ @return, —Å–æ–∑–¥–∞–≤–∞—è –∫—Ä–∞—Å–∏–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.
 */

/**
 * –í–æ–ª—à–µ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ C++: –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∫–æ–¥ –ø–æ–Ω—è—Ç–Ω—ã–º?
 * @file ‚Äî –∫ –∫–∞–∫–æ–º—É —Ñ–∞–π–ª—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ
 * @brief ‚Äî –∫—Ä–∞—Ç–∫–∞—è ¬´–≤—ã–∂–∏–º–∫–∞¬ª —Ñ—É–Ω–∫—Ü–∏–∏ (–≤–∏–¥–Ω–æ –≤ –ø–æ–¥—Å–∫–∞–∑–∫–∞—Ö IDE üí°)
 * @param ‚Äî –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (—á—Ç–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å?)
 * @return ‚Äî —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è
 */

#include <iostream>
#include <vector>
#include <random>
#include <algorithm>
#include <limits>

using namespace std;

/**
 * –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤ —Å–ª—É—á–∞–π–Ω—ã—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [-100, 100].
 * @param n –†–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ (n >= 10).
 * @return –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤.
 */
vector<int> generateArray(int n) {
    random_device rd;
    mt19937 gen(rd());
    uniform_int_distribution<> distr(-100, 100);
    vector<int> arr;
    for (int i = 0; i < n; ++i) {
        arr.push_back(distr(gen));
    }
    return arr;
}

/**
 * –ù–∞—Ö–æ–¥–∏—Ç —Å—Ä–µ–¥–Ω–∏–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
 * –ú–µ–Ω—è–µ—Ç –º–µ—Å—Ç–∞–º–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç—ã.
 * @param arr –ò—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤.
 * @return –ö–æ—Ä—Ç–µ–∂: (—Å—Ä–µ–¥–Ω–µ–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö, —Å—Ä–µ–¥–Ω–µ–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö, –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤).
 */
tuple<double, double, vector<int>> processArray(vector<int> arr) {
    int sum_pos = 0, count_pos = 0;
    int sum_neg = 0, count_neg = 0;
    
    for (int num : arr) {
        if (num > 0) {
            sum_pos += num;
            count_pos++;
        } else if (num < 0) {
            sum_neg += num;
            count_neg++;
        }
    }
    
    double avg_pos = count_pos > 0 ? (double)sum_pos / count_pos : 0.0;
    double avg_neg = count_neg > 0 ? (double)sum_neg / count_neg : 0.0;
    
    auto [min_it, max_it] = minmax_element(arr.begin(), arr.end());
    iter_swap(min_it, max_it);
    
    return make_tuple(avg_pos, avg_neg, arr);
}

/**
 * –ù–∞—Ö–æ–¥–∏—Ç —Å–∞–º—É—é –¥–ª–∏–Ω–Ω—É—é —É–±—ã–≤–∞—é—â—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∞—Å—Å–∏–≤–µ.
 * @param arr –ò—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤.
 * @return –í–µ–∫—Ç–æ—Ä, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
 */
vector<int> findDecreasingSequence(const vector<int>& arr) {
    vector<int> current = {arr[0]};
    vector<int> longest;
    
    for (size_t i = 1; i < arr.size(); ++i) {
        if (arr[i] < current.back()) {
            current.push_back(arr[i]);
        } else {
            if (current.size() > longest.size()) {
                longest = current;
            }
            current = {arr[i]};
        }
    }
    
    if (current.size() > longest.size()) {
        longest = current;
    }
    
    return longest;
}

/**
 * –í—ã–≤–æ–¥–∏—Ç –º–∞—Å—Å–∏–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ N√ó5, –Ω–∞—á–∏–Ω–∞—è —Å 1000.
 * @param N –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫.
 */
void printFormattedArray(int N) {
    int start = 1000;
    for (int i = 0; i < N; ++i) {
        for (int j = 0; j < 5; ++j) {
            cout << start + i * 5 + j << " ";
        }
        cout << endl;
    }
}

int main() {
    // –ü—É–Ω–∫—Ç 1
    auto arr = generateArray(10);
    cout << "1. –ò—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤: ";
    for (int num : arr) cout << num << " ";
    cout << endl;

    // –ü—É–Ω–∫—Ç 2
    auto [avg_pos, avg_neg, processed_arr] = processArray(arr);
    cout << "\n2. –°—Ä–µ–¥–Ω–µ–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö: " << avg_pos << endl;
    cout << "–°—Ä–µ–¥–Ω–µ–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö: " << avg_neg << endl;
    cout << "–ú–∞—Å—Å–∏–≤ –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã: ";
    for (int num : processed_arr) cout << num << " ";
    cout << endl;

    // –ü—É–Ω–∫—Ç 3
    auto seq = findDecreasingSequence(processed_arr);
    cout << "\n3. –£–±—ã–≤–∞—é—â–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ";
    for (int num : seq) cout << num << " ";
    cout << endl;

    // –ü—É–Ω–∫—Ç 4
    cout << "\n4. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ (N=4):" << endl;
    printFormattedArray(4);

    return 0;
}
